# connectModules:
#   "confluence:lifecycle":
#     [
#       { "key": "connect-lifecycle", "installed": "/installed" }
#     ]
#   "confluence:dynamicContentMacros":
#     [
#       {
#           "width": "200px",
#           "height": "200px",
#           "url": "/map-viewer?pageTitle={page.title}&viewChoice={view}",
#           "description": { "value": "JB Maps (Connect Macro)" },
#           "documentation": { "url": "http://docs.example.com/addons/maps" },
#           "parameters":
#             [
#               {
#                   "identifier": "view",
#                   "name": { "value": "Map View" },
#                   "description": { "value": "Allows switching between view types" },
#                   "type": "enum",
#                   "required": true,
#                   "multiple": false,
#                   "defaultValue": "Map",
#                   "values": [ "Map", "Satellite" ],
#                   "hidden": false,
#                   "indexing": { "enabled": true }
#                 }
#             ],
#           "name": { "value": "JB Maps (Connect Macro)" },
#           "key": "dynamic-macro-example"
#         }
#     ]
modules:
  confluence:spacePage:
    - key: complex-conditions-space-page
      resource: main
      render: native
      resolver:
        function: resolver
      title:
        i18n: complexConditionsSpacePage.title
      route: space-complex-conditions
      displayConditions:
        appIsLicensed: true
        not:
          appIsLicensed: false
        and:
          - appEdition: standard
          - not:
              appEdition: advanced
          - entityPropertyEqualTo:
              entity: content
              propertyKey: key1
              value: value1
          - entityPropertyEqualTo:
              entity: space
              propertyKey: key2
              value: value2
  macro:
    - key: forge-general-hello-world-macro
      resource: main
      render: native
      resolver:
        function: resolver
      title:
        i18n: helloMacro.title
  webtrigger:
    - key: example-web-trigger-key
      function: web-trigger-function
    - key: web-trigger-app-prop
      function: function-app-prop
    - key: delete-app-prop
      function: func-del-app-prop
  function:
    - key: resolver
      handler: index.handler
    - key: web-trigger-function
      handler: index.runWebTrigger
    - key: function-app-prop
      handler: index.runTriggerFunctionAppProperties
    - key: func-del-app-prop
      handler: index.runDeleteAppProperties
resources:
  - key: main
    path: src/frontend/index.jsx
permissions:
  scopes:
    - read:confluence-content.summary
    - read:connect-confluence
    - write:connect-confluence
    - read:app-data:confluence
    - act-as-user:connect-confluence
    - write:app-data:confluence
translations:
  resources:
    - key: en-US
      path: src/frontend/locales/en-US.json
    - key: zh-CN
      path: src/frontend/locales/zh-CN.json
    - key: zh-TW
      path: src/frontend/locales/zh-TW.json
    - key: de-DE
      path: src/frontend/locales/de-DE.json
  fallback:
    default: en-US
    zh-TW:
      - zh-CN
    ja-JP:
      - de-DE
      - zh-CN

# remotes:
#   - key: connect
#     baseUrl: https://pattern-simple-chauffeur.glitch.me
app:
  id: ari:cloud:ecosystem::app/95e7e49b-d0a7-40c4-9b4b-93c13825f50b # for staging for h11n
  # id: ari:cloud:ecosystem::app/3d77b560-82c6-4107-bda2-f12d041f07fb # prod for h11n
  # id: ari:cloud:ecosystem::app/41183d77-cfbf-42c4-ab4b-adf4851a9958 # prod for pure_forge
  # connect:
  #   key: my-app-conf-glitch
  #   remote: connect
  runtime:
    name: nodejs20.x